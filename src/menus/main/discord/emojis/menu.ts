import { cliTheme, commonTexts, divider, uiText } from "#helpers";
import { menus } from "#menus";
import { DiscordBotToken, ProgramMenuProps } from "#types";
import { select } from "@inquirer/prompts";
import ck from "chalk";
import { selectDiscordBot } from "./menu-select.js";

export async function discordEmojisMenu(props: ProgramMenuProps, token?: DiscordBotToken){
    if (!token){
        await selectDiscordBot(props);
        return;
    }
    
    const action = await select({
        message: uiText(props.lang, {
            "pt-BR": "‚ùë Gerenciar emojis",
            "en-US": "‚ùë Manage emojis",
        }, ck.reset.cyan.underline) +
        ck.green(` ü§ñ ${token.name}`),
        theme: cliTheme,
        choices: [
            { 
                name: uiText(props.lang, {
                    "en-US": "‚ò∞ List emojis",
                    "pt-BR": "‚ò∞ Listar emojis",
                }, ck.blue),
                value: "list" 
            },
            { 
                name: uiText(props.lang, {
                    "en-US": "‚á° Upload emojis",
                    "pt-BR": "‚á° Enviar emojis",
                }, ck.green),
                value: "upload" 
            },
            { 
                name: uiText(props.lang, {
                    "en-US": "‚á£ Generate emojis file",
                    "pt-BR": "‚á£ Gerar arquivo de emojis",
                }, ck.blue),
                value: "file" 
            },
            { 
                name: uiText(props.lang, {
                    "en-US": "‚ñ§ Delete emojis",
                    "pt-BR": "‚ñ§ Excluir emojis",
                }, ck.red),
                value: "delete" 
            },
            { 
                name: uiText(props.lang, {
                    "en-US": "‚§∑ Select other application",
                    "pt-BR": "‚§∑ Selecione outra aplica√ß√£o",
                }, ck.yellow),
                value: "select" 
            },
            {
                name: commonTexts(props.lang).back,
                value: "back" 
            },
        ]
    });
    divider();

    switch(action){
        case "list":{
            menus.discord.emojis.list(props, token);
            return;
        }
        case "upload":{
            menus.discord.emojis.upload(props, token);
            return;
        }
        case "delete":{
            menus.discord.emojis.delete(props, token);
            return;
        }
        case "file":{
            menus.discord.emojis.file(props, token);
            return;
        }
        case "select":{
            await menus.discord.emojis.select(props);
            return;
        }
        case "back":{
            menus.main(props);
            return;
        }
    }

}

